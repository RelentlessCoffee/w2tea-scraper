{% extends "_base.html" %}
{% block title %}{{product.name}}{% endblock %}
{% block body %}
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
    integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
    crossorigin="anonymous">
</script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"
    integrity="sha256-GSRe5cHmmTD3DgBxRifzkNLaW1iwPTzt9kJ86rGa8tg="
    crossorigin="anonymous">
</script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.js"
    integrity="sha256-Ps0pf4Ma5dU+zSI0m+Spwq+9QE5EjL5yt0dfWGPEugQ="
    crossorigin="anonymous">
</script>
<canvas id="myChart" style="height:400px; width:1000px"></canvas>
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        datasets: [{
            data: [
                {% for sample in samples %}
                  {"x": "{{sample.date}}", "y": {{sample.quantity or "null"}}
                  },
                {% endfor %}
            ]
        }]
    },
    options: {
        title: {
            display: true,
            text: '{{product.name}}'
        },
        legend: {
            display: false,
        },
        elements: {
            line: {
                tension: 0
            }
        },
        responsive: false,
        scales: {
            xAxes: [{
                type: "time",
                time: {
                    unit: 'week'
                }
            }],
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
{% endblock %}
